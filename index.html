 <!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Attendance Tracker Pro</title>
    <style>
        :root { 
            --primary: #4a90e2; 
            --success: #2ecc71; 
            --warning: #f1c40f;
            --danger: #e74c3c; 
            --bg: #0f172a; 
            --card: #1e293b;
        }
        
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: var(--bg); 
            color: white;
            margin: 0; 
            padding: 15px; 
            transition: background 0.3s;
        }

        .container { 
            width: 100%; 
            max-width: 500px; 
            margin: auto; 
            background: var(--card); 
            padding: 25px; 
            border-radius: 24px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
        }

        h2 { text-align: center; color: var(--primary); text-shadow: 0 0 10px rgba(74,144,226,0.3); }

        /* Inputs & Login */
        .input-group { margin-bottom: 20px; }
        .input-group label { display: block; margin-bottom: 8px; font-size: 0.9rem; color: #94a3b8; }
        .input-group input { 
            width: 100%; padding: 12px; 
            background: #0f172a; border: 1px solid #334155; 
            border-radius: 10px; color: white; outline: none;
            transition: border 0.3s, box-shadow 0.3s;
            box-sizing: border-box;
        }
        .input-group input:focus { border-color: var(--primary); box-shadow: 0 0 10px rgba(74,144,226,0.2); }

        /* Dashboard */
        .overall-card { 
            background: linear-gradient(135deg, #4a90e2, #3b82f6); 
            color: white; padding: 25px; border-radius: 18px; 
            text-align: center; margin-bottom: 25px;
            transition: transform 0.3s;
        }
        .overall-percent { font-size: 3rem; font-weight: 800; }

        /* Subject Cards */
        .subject-card { 
            background: rgba(255,255,255,0.03); 
            border: 1px solid rgba(255,255,255,0.1); 
            margin-bottom: 15px; padding: 18px; 
            border-radius: 15px; transition: all 0.3s;
        }
        .subject-card:hover { 
            background: rgba(255,255,255,0.07); 
            transform: scale(1.02);
            border-color: var(--primary);
        }

        .sub-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .sub-name { font-weight: bold; font-size: 1.1rem; color: #f8fafc; }
        
        .badges { display: flex; gap: 5px; }
        .badge { padding: 3px 8px; border-radius: 6px; font-size: 0.75rem; font-weight: bold; }
        .b-bunk { background: rgba(241, 196, 15, 0.2); color: var(--warning); }
        .b-absent { background: rgba(231, 76, 60, 0.2); color: var(--danger); }

        .btn-group { display: flex; gap: 8px; margin-top: 15px; }
        .btn { 
            flex: 1; border: none; padding: 12px; 
            border-radius: 10px; cursor: pointer; 
            color: white; font-weight: bold; font-size: 0.8rem;
            transition: all 0.2s;
        }
        .btn:active { transform: scale(0.95); }
        
        .p-btn { background: var(--success); box-shadow: 0 4px 0 #1e8449; }
        .ab-btn { background: var(--danger); box-shadow: 0 4px 0 #922b21; }
        .bk-btn { background: var(--warning); color: #000; box-shadow: 0 4px 0 #9a7d0a; }

        .start-btn { width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; }
        .reset-btn { width: 100%; background: transparent; color: #64748b; padding: 12px; border: 1px solid #334155; border-radius: 12px; margin-top: 20px; cursor: pointer; }
        
        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>

<div class="container">
    <div id="login-page">
        <h2>üìù Student Access</h2>
        <div class="input-group">
            <label>Full Name</label>
            <input type="text" id="userName" placeholder="Type your name...">
        </div>
        <div class="input-group">
            <label>Class/Semester</label>
            <input type="text" id="userClass" placeholder="e.g. B.Tech CS">
        </div>
        <div class="input-group">
            <label>Roll Number</label>
            <input type="text" id="userRoll" placeholder="Enter Roll No.">
        </div>
        <button class="start-btn" onclick="startApp()">Start New Session</button>
    </div>

    <div id="dashboard" style="display: none;">
        <div id="userInfoDisplay" style="text-align: center; color: #94a3b8; margin-bottom: 10px; font-size: 0.9rem;"></div>
        <div style="text-align: center; margin-bottom: 15px;">
            <button onclick="logout()" style="background:none; border:none; color:var(--primary); cursor:pointer; font-size:0.8rem;">[ Change User ]</button>
        </div>
        
        <div class="overall-card">
            <div style="font-size: 0.8rem; letter-spacing: 1px;">OVERALL ATTENDANCE</div>
            <div class="overall-percent" id="overall-p">0%</div>
            <div id="overall-stats" style="font-size: 0.8rem; margin-top: 5px; opacity: 0.8;"></div>
        </div>

        <div id="list"></div>
        <button class="reset-btn" onclick="resetData()">Reset All Attendance</button>
    </div>
</div>

<script>
    const subjects = ["Maths", "Physics", "Chemistry", "CS", "Data Structure", "Web Dev", "English", "Economics"];
    
    // Sirf page load par check karega ki user logged in hai ya nahi
    window.onload = () => {
        if (localStorage.getItem('user_details')) {
            showDashboard();
        }
    }

    function startApp() {
        const name = document.getElementById('userName').value;
        const uClass = document.getElementById('userClass').value;
        const roll = document.getElementById('userRoll').value;

        if (!name || !uClass || !roll) return alert("All fields are mandatory!");

        localStorage.setItem('user_details', JSON.stringify({ name, uClass, roll }));
        showDashboard();
    }

    function showDashboard() {
        document.getElementById('login-page').style.display = 'none';
        document.getElementById('dashboard').style.display = 'block';
        const user = JSON.parse(localStorage.getItem('user_details'));
        document.getElementById('userInfoDisplay').innerHTML = `<b>${user.name}</b> | ${user.uClass} | ${user.roll}`;
        updateUI();
    }

    function logout() {
        if(confirm("Change user? Attendance data will remain saved, but you need to login again.")) {
            localStorage.removeItem('user_details');
            location.reload();
        }
    }

    function updateUI() {
        let data = JSON.parse(localStorage.getItem('att_v3')) || {};
        const list = document.getElementById('list');
        list.innerHTML = '';
        
        let tP = 0, tT = 0, tB = 0, tA = 0;

        subjects.forEach((s, index) => {
            if(!data[s]) data[s] = {p:0, t:0, b:0, a:0};
            const {p, t, b, a} = data[s];
            tP += p; tT += t; tB += b; tA += a;

            const perc = t === 0 ? 0 : ((p/t)*100).toFixed(1);
            
            list.innerHTML += `
                <div class="subject-card" style="animation: slideIn 0.3s ease forwards ${index * 0.05}s; opacity: 0;">
                    <div class="sub-header">
                        <span class="sub-name">${index + 1}. ${s}</span>
                        <div class="badges">
                            <span class="badge b-absent">A: ${a}</span>
                            <span class="badge b-bunk">B: ${b}</span>
                        </div>
                    </div>
                    <div style="font-size: 0.85rem; color: #94a3b8; margin-bottom: 10px;">
                        Score: <b style="color: ${perc < 75 ? '#e74c3c' : '#2ecc71'}">${perc}%</b> (Present: ${p}/${t})
                    </div>
                    <div class="btn-group">
                        <button class="btn p-btn" onclick="mark('${s}', 'p')">P</button>
                        <button class="btn ab-btn" onclick="mark('${s}', 'a')">A</button>
                        <button class="btn bk-btn" onclick="mark('${s}', 'b')">B</button>
                    </div>
                </div>`;
        });

        const overall = tT === 0 ? 0 : ((tP/tT)*100).toFixed(1);
        document.getElementById('overall-p').innerText = overall + "%";
        document.getElementById('overall-stats').innerText = `Total: ${tT} | P: ${tP} | A: ${tA} | B: ${tB}`;
        document.getElementById('overall-p').style.color = overall < 75 ? '#e74c3c' : 'white';
    }

    function mark(s, type) {
        let data = JSON.parse(localStorage.getItem('att_v3')) || {};
        if(!data[s]) data[s] = {p:0, t:0, b:0, a:0};

        data[s].t += 1;
        if(type === 'p') data[s].p += 1;
        else if(type === 'a') data[s].a += 1;
        else if(type === 'b') data[s].b += 1;

        localStorage.setItem('att_v3', JSON.stringify(data));
        updateUI();

        const currentPerc = (data[s].p / data[s].t) * 100;
        if(currentPerc < 75) {
            document.body.style.background = '#2d0a0a';
            setTimeout(() => document.body.style.background = '#0f172a', 100);
        }
    }

    function resetData() {
        if(confirm("Confirm Delete? All history will be wiped.")) {
            localStorage.removeItem('att_v3');
            updateUI();
        }
    }
</script>
</body>
</html>